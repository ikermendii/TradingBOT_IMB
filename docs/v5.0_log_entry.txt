

---

### 2025-10-25 - v5.0 PHASE 2 - DIVERGENCIAS RSI + LEVERAGE 20x

**Cambios realizados**:
- ACTIVADAS DIVERGENCIAS RSI: _bullish_divergence() y _bearish_divergence() como SEÑAL PRINCIPAL
- LEVERAGE 20x: Configurado apalancamiento en futuros
- Cálculo de posición actualizado: Usa leverage 20x manteniendo riesgo 1.5% sobre balance real
- RSI relajado: LONG < 45 (era 42), SHORT > 55 (era 58) para capturar más divergencias
- Arquitectura PHASE 2: Divergencias = señal principal, otros = filtros de contexto
- MACD removido de condiciones (conflicto con divergencias)

**Razón**:
v4.0 fue solo el "esqueleto" (PHASE 1) sin su "cerebro" principal. Las divergencias RSI son la ESENCIA de la estrategia Multitimeframe.

Problemas v4.0:
- Solo 6 trades en 3 años (filtros demasiado restrictivos sin señal principal)
- Win rate 16.67% (sin divergencias, trades de baja calidad)
- 100% shorts (RSI < 42 demasiado extremo en mercado alcista)

Solución v5.0:
- Divergencias detectan reversiones de alta probabilidad
- RSI relajado (45/55) permite capturar más oportunidades válidas
- Leverage 20x aumenta rentabilidad manteniendo riesgo controlado al 1.5%

**Parámetros v5.0**:
- Señal principal: Divergencias RSI (alcista/bajista)
- Leverage: 20x
- RSI: LONG < 45, SHORT > 55
- Cooldown: 60 minutos
- Risk: 1.5% del balance real (sin apalancar)
- Daily loss limit: 3% pérdida máxima
- Filtros: Tendencia + Volumen + Volatilidad (ATR >= 0.3%)
- TPs: 1.5R (50%), 3R (30%), 6R (20%)

**Expectativa de resultados**:
- Trades esperados: 20-40 en 3 años (calidad > cantidad)
- Win rate objetivo: 50-60% (divergencias tienen alta precisión)
- Profit factor esperado: >1.5
- Return anual objetivo: 30-80% (con leverage 20x)

**Resultados**:
PENDIENTE - Ejecutar backtest v5.0

**Ubicación**: `code/strategies/Multitimeframe/__init__.py` (543 líneas)
